(()=>{var e={3868:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boardFromFen=t.parseBoard=t.initialBoard=t.cloneBoard=void 0;const r=n(3318);t.cloneBoard=e=>[...e],t.initialBoard=["r","n","b","q","k","b","n","r","p","p","p","p","p","p","p","p"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","P","P","P","P","P","P","P","P","R","N","B","Q","K","B","N","R"],t.parseBoard=e=>{if(!Array.isArray(e))return t.initialBoard;if(64!==e.length)return t.initialBoard;for(let n of e){if("string"!=typeof n)return t.initialBoard;if(!(n in r.Piece))return t.initialBoard}return e},t.boardFromFen=e=>{let n=[],r=e.split(" ")[0].split("/");if(8!==r.length)return t.initialBoard;for(let e of r)for(let r of e)if(["R","N","B","Q","K","P","?"].includes(r.toUpperCase()))n.push(r);else try{let e=Number.parseInt(r);for(let t=0;t<e;t++)n.push(" ")}catch(e){return t.initialBoard}return n}},3834:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.File=t.Rank=void 0,(n=t.Rank||(t.Rank={}))[n.Eighth=0]="Eighth",n[n.Seventh=1]="Seventh",n[n.Sixth=2]="Sixth",n[n.Fifth=3]="Fifth",n[n.Fourth=4]="Fourth",n[n.Third=5]="Third",n[n.Second=6]="Second",n[n.First=7]="First",function(e){e[e.A=0]="A",e[e.B=1]="B",e[e.C=2]="C",e[e.D=3]="D",e[e.E=4]="E",e[e.F=5]="F",e[e.G=6]="G",e[e.H=7]="H"}(t.File||(t.File={}))},4843:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.tryFindStatus=t.GameStatus=void 0,function(e){e.WhiteResigns="white_resigns",e.BlackResigns="black_resigns",e.Draw="draw",e.WhiteWins="white_wins",e.BlackWins="black_wins",e.InProgress="in_progress",e.NotPlaying="not_playing"}(n=t.GameStatus||(t.GameStatus={})),t.tryFindStatus=e=>e.board.includes("k")?e.board.includes("K")?n.InProgress:n.BlackWins:n.WhiteWins},1241:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHalfBoard=void 0;const r=n(504),o=n(3318);t.getHalfBoard=(e,t)=>{let n=[],i=new Set;for(let n=0;n<64;n++){let s=e[n];if(o.getColor(s)===t){i.add(n);let t=r.getVision(n,e);for(let e of t)i.add(e)}}for(let t=0;t<64;t++)i.has(t)?n.push(e[t]):n.push(o.Piece.Fog);return n}},3366:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHalfPosition=void 0;const r=n(3071),o=n(1241),i=n(3318),s=n(24);t.getHalfPosition=(e,t)=>{let n=o.getHalfBoard(e.board,t),a=null,c=null;if(e.enPassantOneStep&&e.enPassantTwoStep){let n=s.nudge(e.enPassantTwoStep,0,-1);if(n){let r=e.board[n];"P"===r.toUpperCase()&&i.getColor(r)!==t&&(a=e.enPassantOneStep,c=e.enPassantTwoStep)}let r=s.nudge(e.enPassantTwoStep,0,1);if(r){let n=e.board[r];"P"===n.toUpperCase()&&i.getColor(n)!==t&&(a=e.enPassantOneStep,c=e.enPassantTwoStep)}}return{board:n,colorToMove:e.colorToMove,whiteCanCastle:t===r.Color.White?e.whiteCanCastle:new Set,blackCanCastle:t===r.Color.Black?e.blackCanCastle:new Set,enPassantOneStep:a,enPassantTwoStep:c,halfMoveClock:-1,fullMoveNumber:e.fullMoveNumber}}},3318:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.getColor=t.Color=t.Piece=void 0,(r=t.Piece||(t.Piece={})).BlackRook="r",r.BlackKnight="n",r.BlackBishop="b",r.BlackQueen="q",r.BlackKing="k",r.BlackPawn="p",r.WhiteRook="R",r.WhiteKnight="N",r.WhiteBishop="B",r.WhiteQueen="Q",r.WhiteKing="K",r.WhitePawn="P",r.Empty=" ",r.Fog="?",function(e){e[e.White=0]="White",e[e.Black=1]="Black",e[e.NoColor=2]="NoColor"}(n=t.Color||(t.Color={})),t.getColor=e=>" "===e||"?"===e?n.NoColor:e===e.toUpperCase()?n.White:n.Black},2550:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toFen=t.parseFen=t.enPassantFromFen=t.blackCanCastleFromFen=t.whiteCanCastleFromFen=t.colorToMoveFromFen=t.initialPosition=t.clonePosition=void 0;const r=n(3868),o=n(3318),i=n(24);t.clonePosition=e=>({board:r.cloneBoard(e.board),colorToMove:e.colorToMove,whiteCanCastle:e.whiteCanCastle,blackCanCastle:e.blackCanCastle,enPassantOneStep:e.enPassantOneStep,enPassantTwoStep:e.enPassantTwoStep,halfMoveClock:e.halfMoveClock,fullMoveNumber:e.fullMoveNumber}),t.initialPosition={board:r.initialBoard,colorToMove:o.Color.White,whiteCanCastle:new Set(["K","Q"]),blackCanCastle:new Set(["k","q"]),enPassantOneStep:null,enPassantTwoStep:null,halfMoveClock:0,fullMoveNumber:1},t.colorToMoveFromFen=e=>"w"===e.split(" ")[1]?o.Color.White:o.Color.Black,t.whiteCanCastleFromFen=e=>{let t=e.split(" "),n=new Set;return t[2].includes("K")&&n.add("K"),t[2].includes("Q")&&n.add("Q"),n},t.blackCanCastleFromFen=e=>{let t=e.split(" "),n=new Set;return t[2].includes("k")&&n.add("k"),t[2].includes("q")&&n.add("q"),n},t.enPassantFromFen=(e,t)=>{let n=e.split(" "),r=null,s=null;if("-"!==n[3]){r=i.fromAlg(n[3]);let e=t===o.Color.White?-1:1;s=i.nudge(r,e,0)}return[r,s]},t.parseFen=e=>{let n=e.split(" ");if(6!==n.length)return t.initialPosition;let o=r.boardFromFen(e),i=t.colorToMoveFromFen(e),s=t.whiteCanCastleFromFen(e),a=t.blackCanCastleFromFen(e),[c,l]=t.enPassantFromFen(e,i);return{board:o,colorToMove:i,whiteCanCastle:s,blackCanCastle:a,enPassantOneStep:c,enPassantTwoStep:l,halfMoveClock:Number.parseInt(n[4]),fullMoveNumber:Number.parseInt(n[5])}},t.toFen=e=>{let t="",n=e.board;for(let e=0;e<8;e++){let r=0;for(let o=0;o<8;o++){let s=i.ordinal(e,o);" "!==n[s]?(r>0&&(t+=`${r}`,r=0),t+=n[s]):r++}r>0&&(t+=`${r}`),e<7&&(t+="/")}return t+=" ",t+=e.colorToMove===o.Color.White?"w":"b",t+=" ",e.whiteCanCastle.has("K")&&(t+="K"),e.whiteCanCastle.has("Q")&&(t+="Q"),e.blackCanCastle.has("k")&&(t+="k"),e.blackCanCastle.has("q")&&(t+="q"),t+=" ",null==e.enPassantOneStep?t+="-":t+=i.toAlg(e.enPassantOneStep),t+=` ${e.halfMoveClock}`,t+=` ${e.fullMoveNumber}`,t}},24:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromAlg=t.toAlg=t.ordinal=t.coordinates=t.nudge=t.addSquare=t.Square=void 0;const r=n(3318);var o;(o=t.Square||(t.Square={}))[o.A8=0]="A8",o[o.B8=1]="B8",o[o.C8=2]="C8",o[o.D8=3]="D8",o[o.E8=4]="E8",o[o.F8=5]="F8",o[o.G8=6]="G8",o[o.H8=7]="H8",o[o.A7=8]="A7",o[o.B7=9]="B7",o[o.C7=10]="C7",o[o.D7=11]="D7",o[o.E7=12]="E7",o[o.F7=13]="F7",o[o.G7=14]="G7",o[o.H7=15]="H7",o[o.A6=16]="A6",o[o.B6=17]="B6",o[o.C6=18]="C6",o[o.D6=19]="D6",o[o.E6=20]="E6",o[o.F6=21]="F6",o[o.G6=22]="G6",o[o.H6=23]="H6",o[o.A5=24]="A5",o[o.B5=25]="B5",o[o.C5=26]="C5",o[o.D5=27]="D5",o[o.E5=28]="E5",o[o.F5=29]="F5",o[o.G5=30]="G5",o[o.H5=31]="H5",o[o.A4=32]="A4",o[o.B4=33]="B4",o[o.C4=34]="C4",o[o.D4=35]="D4",o[o.E4=36]="E4",o[o.F4=37]="F4",o[o.G4=38]="G4",o[o.H4=39]="H4",o[o.A3=40]="A3",o[o.B3=41]="B3",o[o.C3=42]="C3",o[o.D3=43]="D3",o[o.E3=44]="E3",o[o.F3=45]="F3",o[o.G3=46]="G3",o[o.H3=47]="H3",o[o.A2=48]="A2",o[o.B2=49]="B2",o[o.C2=50]="C2",o[o.D2=51]="D2",o[o.E2=52]="E2",o[o.F2=53]="F2",o[o.G2=54]="G2",o[o.H2=55]="H2",o[o.A1=56]="A1",o[o.B1=57]="B1",o[o.C1=58]="C1",o[o.D1=59]="D1",o[o.E1=60]="E1",o[o.F1=61]="F1",o[o.G1=62]="G1",o[o.H1=63]="H1",t.addSquare=(e,t,n,o,i=!1,s=!1,a=null)=>{if(null==e)return!1;if(0<=e&&e<64){let c=o[e],l=r.getColor(c);if("?"===c)return!1;if(l===n)return!1;if(l===r.Color.NoColor){if(!s)return t.push(e),!0;if(e===a&&s)return t.push(e),!0;if(s)return!1}return!(i&&!s||(t.push(e),1))}return!1},t.nudge=(e,n,r)=>{let[o,i]=t.coordinates(e),s=o+n,a=i+r;return s<0||s>7||a<0||a>7?null:t.ordinal(s,a)},t.coordinates=e=>[Math.trunc(e/8),e%8],t.ordinal=(e,t)=>8*e+t,t.toAlg=e=>{let[n,r]=t.coordinates(e);return`${String.fromCharCode("a".charCodeAt(0)+r)}${8-n}`},t.fromAlg=e=>{try{let n=8-Number.parseInt(e.charAt(1)),r=e.charCodeAt(0)-"a".charCodeAt(0);return t.ordinal(n,r)}catch(e){return-1}}},3071:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(3868),t),o(n(3834),t),o(n(1241),t),o(n(3366),t),o(n(3318),t),o(n(2550),t),o(n(24),t),o(n(4843),t),o(n(504),t),o(n(4488),t)},762:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bishopMoves=void 0;const r=n(3318),o=n(24);t.bishopMoves=(e,t)=>{let n=r.getColor(t[e]),i=[],[s,a]=o.coordinates(e);for(let e=s+1,r=a+1;e<8&&r<8&&o.addSquare(o.ordinal(e,r),i,n,t);e++,r++);for(let e=s-1,r=a+1;e>=0&&r<8&&o.addSquare(o.ordinal(e,r),i,n,t);e--,r++);for(let e=s+1,r=a-1;e<8&&r>=0&&o.addSquare(o.ordinal(e,r),i,n,t);e++,r--);for(let e=s-1,r=a-1;e>=0&&r>=0&&o.addSquare(o.ordinal(e,r),i,n,t);e--,r--);return i}},4488:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findOneMoveWin=void 0;const r=n(3071),o=n(3318);t.findOneMoveWin=e=>{let t=e.board;for(let n=0;n<64;n++)if(r.getColor(t[n])===e.colorToMove){let e=r.getVision(n,t);for(let r of e)if("K"===t[r].toUpperCase())return{fromSquare:n,toSquare:r,promotionPiece:o.Piece.Empty}}return null}},7495:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.kingMoves=t.kingVision=void 0;const r=n(3318),o=n(24);t.kingVision=(e,t)=>{let n=r.getColor(t[e]),i=[];for(let r=-1;r<2;r++)for(let s=-1;s<2;s++)o.addSquare(o.nudge(e,r,s),i,n,t);return i},t.kingMoves=(e,t,n,i)=>{let s=r.getColor(t[e]),a=[];for(let n=-1;n<2;n++)for(let r=-1;r<2;r++)o.addSquare(o.nudge(e,n,r),a,s,t);return e===o.Square.E1&&s===r.Color.White&&(t[o.Square.F1]===r.Piece.Empty&&t[o.Square.G1]===r.Piece.Empty&&n.has("K")&&o.addSquare(o.Square.G1,a,s,t),t[o.Square.D1]===r.Piece.Empty&&t[o.Square.C1]===r.Piece.Empty&&t[o.Square.B1]===r.Piece.Empty&&n.has("Q")&&o.addSquare(o.Square.C1,a,s,t)),e===o.Square.E8&&i&&s===r.Color.Black&&(t[o.Square.F8]===r.Piece.Empty&&t[o.Square.G8]===r.Piece.Empty&&i.has("k")&&o.addSquare(o.Square.G8,a,s,t),t[o.Square.D8]===r.Piece.Empty&&t[o.Square.C8]===r.Piece.Empty&&t[o.Square.B8]===r.Piece.Empty&&i.has("q")&&o.addSquare(o.Square.C8,a,s,t)),a}},9446:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.knightMoves=void 0;const r=n(3318),o=n(24);t.knightMoves=(e,t)=>{let n=r.getColor(t[e]),i=[];return o.addSquare(o.nudge(e,-2,-1),i,n,t),o.addSquare(o.nudge(e,-2,1),i,n,t),o.addSquare(o.nudge(e,-1,-2),i,n,t),o.addSquare(o.nudge(e,-1,2),i,n,t),o.addSquare(o.nudge(e,1,-2),i,n,t),o.addSquare(o.nudge(e,1,2),i,n,t),o.addSquare(o.nudge(e,2,-1),i,n,t),o.addSquare(o.nudge(e,2,1),i,n,t),i}},504:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.move=t.getVision=t.getMoves=t.getAlgFromMove=t.getMoveFromAlg=void 0;const r=n(3834),o=n(3318),i=n(2550),s=n(24),a=n(762),c=n(7495),l=n(9446),u=n(4685),h=n(2391),f=n(123);t.getMoveFromAlg=e=>{let t=s.fromAlg(e.substring(0,2)),n=s.fromAlg(e.substring(2,4)),r=o.Piece.Empty;return 5===e.length&&["R","N","B","Q","K","P"].includes(e.charAt(4).toUpperCase())&&(r=e[4]),{fromSquare:t,toSquare:n,promotionPiece:r}},t.getAlgFromMove=e=>`${s.toAlg(e.fromSquare)}${s.toAlg(e.toSquare)}${e.promotionPiece===o.Piece.Empty?"":e.promotionPiece}`,t.getMoves=(e,t)=>{let n=[],r=t.board,i=r[e];if(i===o.Piece.WhiteRook||i===o.Piece.BlackRook)n=f.rookMoves(e,r);else if(i===o.Piece.WhiteKnight||i===o.Piece.BlackKnight)n=l.knightMoves(e,r);else if(i===o.Piece.WhiteBishop||i===o.Piece.BlackBishop)n=a.bishopMoves(e,r);else if(i===o.Piece.WhiteKing||i===o.Piece.BlackKing){let o=t.whiteCanCastle,i=t.blackCanCastle;n=c.kingMoves(e,r,o,i)}else i===o.Piece.WhiteQueen||i===o.Piece.BlackQueen?n=h.queenMoves(e,r):i!==o.Piece.WhitePawn&&i!==o.Piece.BlackPawn||(n=u.pawnMoves(e,r,t.enPassantOneStep));return n},t.getVision=(e,t)=>{let n=[],r=t[e];return r===o.Piece.WhiteRook||r===o.Piece.BlackRook?n=f.rookMoves(e,t):r===o.Piece.WhiteKnight||r===o.Piece.BlackKnight?n=l.knightMoves(e,t):r===o.Piece.WhiteBishop||r===o.Piece.BlackBishop?n=a.bishopMoves(e,t):r===o.Piece.WhiteKing||r===o.Piece.BlackKing?n=c.kingVision(e,t):r===o.Piece.WhiteQueen||r===o.Piece.BlackQueen?n=h.queenMoves(e,t):r!==o.Piece.WhitePawn&&r!==o.Piece.BlackPawn||(n=u.pawnVision(e,t)),n},t.move=(e,n)=>{let a=e.fromSquare,c=e.toSquare,l=e.promotionPiece,u=n.board,h=u[a];if(o.getColor(h)===o.Color.NoColor)return{newPosition:n,message:"No piece to move."};if(o.getColor(h)!==n.colorToMove)return{newPosition:n,message:"Not your move."};if(!t.getMoves(a,n).includes(c))return{newPosition:n,message:"Cannot move to that square."};let f=i.clonePosition(n);f.board[a]=o.Piece.Empty,f.board[c]=h,h===o.Piece.WhiteKing&&(a===s.Square.E1&&c===s.Square.G1&&(f.board[s.Square.H1]=o.Piece.Empty,f.board[s.Square.F1]=o.Piece.WhiteRook),a===s.Square.E1&&c===s.Square.C1&&(f.board[s.Square.A1]=o.Piece.Empty,f.board[s.Square.D1]=o.Piece.WhiteRook)),h===o.Piece.BlackKing&&(a===s.Square.E8&&c===s.Square.G8&&(f.board[s.Square.H8]=o.Piece.Empty,f.board[s.Square.F8]=o.Piece.BlackRook),a===s.Square.E8&&c===s.Square.C8&&(f.board[s.Square.A8]=o.Piece.Empty,f.board[s.Square.D8]=o.Piece.BlackRook));let d=s.coordinates(c)[0],p=s.coordinates(a)[0];return h===o.Piece.WhitePawn&&d===r.Rank.Eighth&&(f.board[c]=l),h===o.Piece.BlackPawn&&d===r.Rank.First&&(f.board[c]=l),c===n.enPassantTwoStep&&(f.board[n.enPassantTwoStep]=o.Piece.Empty),h===o.Piece.WhitePawn&&p===r.Rank.Second&&d===r.Rank.Fourth?(f.enPassantOneStep=s.nudge(c,1,0),f.enPassantTwoStep=c):h===o.Piece.BlackPawn&&p===r.Rank.Seventh&&d===r.Rank.Fifth?(f.enPassantOneStep=s.nudge(c,-1,0),f.enPassantTwoStep=c):(f.enPassantOneStep=null,f.enPassantTwoStep=null),f.colorToMove=o.Color.White,n.colorToMove===o.Color.White&&(f.colorToMove=o.Color.Black),h===o.Piece.BlackPawn||h===o.Piece.WhitePawn||u[c]!==o.Piece.Empty?f.halfMoveClock=0:f.halfMoveClock+=1,f.colorToMove===o.Color.White?f.fullMoveNumber=n.fullMoveNumber+1:f.fullMoveNumber=n.fullMoveNumber,{newPosition:f,message:`Move: ${a}:${c}=${l}`}}},4685:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pawnMoves=t.pawnVision=void 0;const r=n(3318),o=n(24);t.pawnVision=(e,t)=>{let n=r.getColor(t[e]),i=[],s=1;return n===r.Color.White&&(s=-1),o.addSquare(o.nudge(e,s,-1),i,n,t),o.addSquare(o.nudge(e,s,1),i,n,t),o.addSquare(o.nudge(e,s,0),i,n,t)&&(n===r.Color.White&&6===o.coordinates(e)[0]&&o.addSquare(o.nudge(e,-2,0),i,n,t),n===r.Color.Black&&1===o.coordinates(e)[0]&&o.addSquare(o.nudge(e,2,0),i,n,t)),i},t.pawnMoves=(e,t,n)=>{let i=r.getColor(t[e]),s=[],a=1;return i===r.Color.White&&(a=-1),o.addSquare(o.nudge(e,a,-1),s,i,t,!0,!0,n),o.addSquare(o.nudge(e,a,1),s,i,t,!0,!0,n),o.addSquare(o.nudge(e,a,0),s,i,t,!0,!1)&&(i===r.Color.White&&6===o.coordinates(e)[0]&&o.addSquare(o.nudge(e,-2,0),s,i,t,!0,!1),i===r.Color.Black&&1===o.coordinates(e)[0]&&o.addSquare(o.nudge(e,2,0),s,i,t,!0,!1)),s}},2391:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queenMoves=void 0;const r=n(3318),o=n(762),i=n(123);t.queenMoves=(e,t)=>{r.getColor(t[e]);let n=[];for(let r of i.rookMoves(e,t))n.push(r);for(let r of o.bishopMoves(e,t))n.push(r);return n}},123:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rookMoves=void 0;const r=n(3318),o=n(24);t.rookMoves=(e,t)=>{let n=r.getColor(t[e]),i=[],[s,a]=o.coordinates(e);for(let e=s+1;e<8&&o.addSquare(o.ordinal(e,a),i,n,t);e++);for(let e=s-1;e>=0&&o.addSquare(o.ordinal(e,a),i,n,t);e--);for(let e=a+1;e<8&&o.addSquare(o.ordinal(s,e),i,n,t);e++);for(let e=a-1;e>=0&&o.addSquare(o.ordinal(s,e),i,n,t);e--);return i}},3010:e=>{function t(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=t,t.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(e){this.ms=e},t.prototype.setMax=function(e){this.max=e},t.prototype.setJitter=function(e){this.jitter=e}},3704:(e,t)=>{!function(e){"use strict";t.encode=function(t){var n,r=new Uint8Array(t),o=r.length,i="";for(n=0;n<o;n+=3)i+=e[r[n]>>2],i+=e[(3&r[n])<<4|r[n+1]>>4],i+=e[(15&r[n+1])<<2|r[n+2]>>6],i+=e[63&r[n+2]];return o%3==2?i=i.substring(0,i.length-1)+"=":o%3==1&&(i=i.substring(0,i.length-2)+"=="),i},t.decode=function(t){var n,r,o,i,s,a=.75*t.length,c=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),h=new Uint8Array(u);for(n=0;n<c;n+=4)r=e.indexOf(t[n]),o=e.indexOf(t[n+1]),i=e.indexOf(t[n+2]),s=e.indexOf(t[n+3]),h[l++]=r<<2|o>>4,h[l++]=(15&o)<<4|i>>2,h[l++]=(3&i)<<6|63&s;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},6077:e=>{var t=[].slice;e.exports=function(e,n){if("string"==typeof n&&(n=e[n]),"function"!=typeof n)throw new Error("bind() requires a function");var r=t.call(arguments,2);return function(){return n.apply(e,r.concat(t.call(arguments)))}}},8767:e=>{function t(e){if(e)return function(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},174:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(3645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,":root {\n  --darkBackground: #463f3a;\n  --lightSquares: #bcb8b1;\n  --darkSquares: #8a817c;\n  --fogSquares: #646464;\n  --highlight: #ff2a6d;\n  --hover: #85ebd9;\n  --blackPieceFill: #423d3b;\n  --blackPieceStroke: black;\n  --whitePieceFill: #f4f3ee;\n  --whitePieceStroke: black;\n}\n\nbody {\n  margin: 0px;\n  background-color: var(--lightSquares);\n}\n\n.grid {\n  display: grid;\n}\n\n.grid8x8 {\n  grid-template-rows: repeat(8, min(12.5vw, 9vh));\n  grid-template-columns: repeat(8, min(12.5vw, 9vh));\n}\n.grid1x3 {\n  display: grid;\n  grid-template-rows: repeat(1, 1fr);\n  grid-template-columns: repeat(3, 1fr);\n}\n/* .square:hover {\n  border: 4px solid var(--hover);\n} */\n.dark_square {\n  background-color: var(--darkSquares);\n}\n\n.light_square {\n  background-color: var(--lightSquares);\n}\n\n.blackPiece {\n  fill: var(--blackPieceFill);\n  stroke: var(--blackPieceStroke);\n}\n\n.whitePiece {\n  fill: var(--whitePieceFill);\n  stroke: var(--whitePieceStroke);\n}\n\n.highlight {\n  border: 4px solid var(--highlight);\n}\n.highlight:hover {\n  border: 8px solid var(--highlight);\n}\n\n.fog_square {\n  background-color: var(--fogSquares);\n}\n\n.shadow {\n  box-shadow: 0px 0px 5px;\n}\n\n.row {\n  display: flex;\n}\n\n.column {\n  display: flex;\n  flex-direction: column;\n}\n\n.spaceEvenly {\n  justify-content: space-evenly;\n}\n\n.spaced > * {\n  margin: 10px;\n}\n\n.pad {\n  padding: 10px;\n}\n\n.alignCenter {\n  align-items: center;\n}\n.justifyCenter {\n  justify-items: center;\n}\n\n.justifyCenter {\n  justify-content: center;\n}\n\n.highest {\n  z-index: 2;\n}\n.high {\n  z-index: 1;\n}\n.middle {\n  z-index: 0;\n}\n.low {\n  z-index: -1;\n}\n\n.lightBackground {\n  background-color: var(--lightSquares);\n}\n.darkBackground {\n  background-color: var(--darkBackground);\n}\n",""]);const i=o},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(o[s]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},1227:(e,t,n)=>{t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(2447)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2447:(e,t,n)=>{e.exports=function(e){function t(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let n;function s(...e){if(!s.enabled)return;const t=s,o=Number(new Date),i=o-(n||o);t.diff=i,t.prev=n,t.curr=o,n=o,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,o)=>{if("%%"===n)return n;a++;const i=r.formatters[o];if("function"==typeof i){const r=e[a];n=i.call(t,r),e.splice(a,1),a--}return n})),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=o,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function o(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function s(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){const e=[...r.names.map(s),...r.skips.map(s).map((e=>"-"+e))].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(t=0;t<o;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(7824),Object.keys(e).forEach((t=>{r[t]=e[t]})),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},3549:e=>{e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},5983:(e,t,n)=>{const r=n(2192);e.exports=(e,t)=>new r(e,t),e.exports.Socket=r,e.exports.protocol=r.protocol,e.exports.Transport=n(6496),e.exports.transports=n(3352),e.exports.parser=n(9743)},2192:(e,t,n)=>{const r=n(3352),o=n(8767),i=n(1227)("engine.io-client:socket"),s=n(9743),a=n(4187),c=n(1830);class l extends o{constructor(e,t={}){super(),e&&"object"==typeof e&&(t=e,e=null),e?(e=a(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=a(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{}},t),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=c.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,this.open()}createTransport(e){i('creating transport "%s"',e);const t=function(e){const t={};for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.opts.query);t.EIO=s.protocol,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return i("options: %j",n),new r[e](n)}open(){let e;if(this.opts.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){const e=this;return void setTimeout((function(){e.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return i("error while creating transport: %s",e),this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){i("setting transport %s",e.name);const t=this;this.transport&&(i("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))}probe(e){i('probing transport "%s"',e);let t=this.createTransport(e,{probe:1}),n=!1;const r=this;function o(){if(r.onlyBinaryUpgrades){const e=!this.supportsBinary&&r.transport.supportsBinary;n=n||e}n||(i('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(o){if(!n)if("pong"===o.type&&"probe"===o.data){if(i('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;l.priorWebsocketSuccess="websocket"===t.name,i('pausing current transport "%s"',r.transport.name),r.transport.pause((function(){n||"closed"!==r.readyState&&(i("changing transport and sending upgrade packet"),f(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())}))}else{i('probe transport "%s" failed',e);const n=new Error("probe error");n.transport=t.name,r.emit("upgradeError",n)}})))}function s(){n||(n=!0,f(),t.close(),t=null)}function a(n){const o=new Error("probe error: "+n);o.transport=t.name,s(),i('probe transport "%s" failed because of error: %s',e,n),r.emit("upgradeError",o)}function c(){a("transport closed")}function u(){a("socket closed")}function h(e){t&&e.name!==t.name&&(i('"%s" works - aborting "%s"',e.name,t.name),s())}function f(){t.removeListener("open",o),t.removeListener("error",a),t.removeListener("close",c),r.removeListener("close",u),r.removeListener("upgrading",h)}l.priorWebsocketSuccess=!1,t.once("open",o),t.once("error",a),t.once("close",c),this.once("close",u),this.once("upgrading",h),t.open()}onOpen(){if(i("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){i("starting upgrade probes");let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(i('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else i('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout)}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(i("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}write(e,t,n){return this.sendPacket("message",e,t,n),this}send(e,t,n){return this.sendPacket("message",e,t,n),this}sendPacket(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const o={type:e,data:t,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}close(){const e=this;function t(){e.onClose("forced close"),i("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():t()})):this.upgrading?r():t()),this}onError(e){i("socket error %j",e),l.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)}onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){i('socket close with reason: "%s"',e);const n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}}filterUpgrades(e){const t=[];let n=0;const r=e.length;for(;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}l.priorWebsocketSuccess=!1,l.protocol=s.protocol,e.exports=l},6496:(e,t,n)=>{const r=n(9743),o=n(8767);e.exports=class extends o{constructor(e){super(),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,t){const n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)}onOpen(){this.readyState="open",this.writable=!0,this.emit("open")}onData(e){const t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){this.emit("packet",e)}onClose(){this.readyState="closed",this.emit("close")}}},3352:(e,t,n)=>{const r=n(2777),o=n(3416),i=n(9785),s=n(4442);t.polling=function(e){let t,n=!1,s=!1;const a=!1!==e.jsonp;if("undefined"!=typeof location){const t="https:"===location.protocol;let r=location.port;r||(r=t?443:80),n=e.hostname!==location.hostname||r!==e.port,s=e.secure!==t}if(e.xdomain=n,e.xscheme=s,t=new r(e),"open"in t&&!e.forceJSONP)return new o(e);if(!a)throw new Error("JSONP disabled");return new i(e)},t.websocket=s},9785:(e,t,n)=>{const r=n(9015),o=n(3549),i=/\n/g,s=/\\n/g;let a;function c(){}e.exports=class extends r{constructor(e){super(e),this.query=this.query||{},a||(a=o.___eio=o.___eio||[]),this.index=a.length;const t=this;a.push((function(e){t.onData(e)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){t.script&&(t.script.onerror=c)}),!1)}get supportsBinary(){return!1}doClose(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),super.doClose()}doPoll(){const e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};const n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){const e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)}doWrite(e,t){const n=this;let r;if(!this.form){const e=document.createElement("form"),t=document.createElement("textarea"),n=this.iframeId="eio_iframe_"+this.index;e.className="socketio",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.target=n,e.method="POST",e.setAttribute("accept-charset","utf-8"),t.name="d",e.appendChild(t),document.body.appendChild(e),this.form=e,this.area=t}function o(){a(),t()}function a(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{const e='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(e)}catch(e){r=document.createElement("iframe"),r.name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),a(),e=e.replace(s,"\\\n"),this.area.value=e.replace(i,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&o()}:this.iframe.onload=o}}},3416:(e,t,n)=>{const r=n(2777),o=n(9015),i=n(8767),{pick:s}=n(6839),a=n(3549),c=n(1227)("engine.io-client:polling-xhr");function l(){}const u=null!=new r({xdomain:!1}).responseType;class h extends i{constructor(e,t){super(),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.create()}create(){const e=s(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new r(e),n=this;try{c("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&t.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(e){}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof t.status?t.status:0)}),0))},c("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){n.onError(e)}),0)}"undefined"!=typeof document&&(this.index=h.requestsCount++,h.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(e){this.emit("data",e),this.onSuccess()}onError(e){this.emit("error",e),this.cleanup(!0)}cleanup(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=l:this.xhr.onreadystatechange=l,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete h.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&this.onData(e)}hasXDR(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR}abort(){this.cleanup()}}function f(){for(let e in h.requests)h.requests.hasOwnProperty(e)&&h.requests[e].abort()}h.requestsCount=0,h.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",f):"function"==typeof addEventListener&&addEventListener("onpagehide"in a?"pagehide":"unload",f,!1)),e.exports=class extends o{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}const t=e&&e.forceBase64;this.supportsBinary=u&&!t}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new h(this.uri(),e)}doWrite(e,t){const n=this.request({method:"POST",data:e}),r=this;n.on("success",t),n.on("error",(function(e){r.onError("xhr post error",e)}))}doPoll(){c("xhr poll");const e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e}},e.exports.Request=h},9015:(e,t,n)=>{const r=n(6496),o=n(1830),i=n(9743),s=n(2281),a=n(1227)("engine.io-client:polling");e.exports=class extends r{get name(){return"polling"}doOpen(){this.poll()}pause(e){const t=this;function n(){a("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){let e=0;this.polling&&(a("we are currently polling - waiting to pause"),e++,this.once("pollComplete",(function(){a("pre-pause polling complete"),--e||n()}))),this.writable||(a("we are currently writing - waiting to pause"),e++,this.once("drain",(function(){a("pre-pause writing complete"),--e||n()})))}else n()}poll(){a("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(e){const t=this;a("polling got data %s",e),i.decodePayload(e,this.socket.binaryType).forEach((function(e,n,r){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():a('ignoring poll - transport state "%s"',this.readyState))}doClose(){const e=this;function t(){a("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(a("transport open - closing"),t()):(a("transport not open - deferring close"),this.once("open",t))}write(e){this.writable=!1,i.encodePayload(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emit("drain")}))}))}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let n="";return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=s()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),e.length&&(e="?"+e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}}},866:(e,t,n)=>{const r=n(3549);e.exports={WebSocket:r.WebSocket||r.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer"}},4442:(e,t,n)=>{const r=n(6496),o=n(9743),i=n(1830),s=n(2281),{pick:a}=n(6839),{WebSocket:c,usingBrowserWebSocket:l,defaultBinaryType:u}=n(866),h=n(1227)("engine.io-client:websocket"),f="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class d extends r{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,n=f?{}:a(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=l&&!f?t?new c(e,t):new c(e):new c(e,t,n)}catch(e){return this.emit("error",e)}this.ws.binaryType=this.socket.binaryType||u,this.addEventListeners()}addEventListeners(){const e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}}write(e){const t=this;this.writable=!1;let n=e.length,r=0;const i=n;for(;r<i;r++)!function(e){o.encodePacket(e,t.supportsBinary,(function(r){const o={};!l&&(e.options&&(o.compress=e.options.compress),t.opts.perMessageDeflate)&&("string"==typeof r?Buffer.byteLength(r):r.length)<t.opts.perMessageDeflate.threshold&&(o.compress=!1);try{l?t.ws.send(r):t.ws.send(r,o)}catch(e){h("websocket closed before onclose event")}--n||(t.emit("flush"),setTimeout((function(){t.writable=!0,t.emit("drain")}),0))}))}(e[r])}onClose(){r.prototype.onClose.call(this)}doClose(){void 0!==this.ws&&this.ws.close()}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let n="";return this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=s()),this.supportsBinary||(e.b64=1),e=i.encode(e),e.length&&(e="?"+e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}check(){return!(!c||"__initialize"in c&&this.name===d.prototype.name)}}e.exports=d},6839:e=>{e.exports.pick=(e,...t)=>t.reduce(((t,n)=>(t[n]=e[n],t)),{})},2777:(e,t,n)=>{const r=n(8058),o=n(3549);e.exports=function(e){const t=e.xdomain,n=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&i)return new XDomainRequest}catch(e){}if(!t)try{return new(o[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},1712:e=>{const t=Object.create(null);t.open="0",t.close="1",t.ping="2",t.pong="3",t.message="4",t.upgrade="5",t.noop="6";const n=Object.create(null);Object.keys(t).forEach((e=>{n[t[e]]=e})),e.exports={PACKET_TYPES:t,PACKET_TYPES_REVERSE:n,ERROR_PACKET:{type:"error",data:"parser error"}}},4965:(e,t,n)=>{const{PACKET_TYPES_REVERSE:r,ERROR_PACKET:o}=n(1712);let i;"function"==typeof ArrayBuffer&&(i=n(3704));const s=(e,t)=>{if(i){const n=i.decode(e);return a(n,t)}return{base64:!0,data:e}},a=(e,t)=>{switch(t){case"blob":return e instanceof ArrayBuffer?new Blob([e]):e;case"arraybuffer":default:return e}};e.exports=(e,t)=>{if("string"!=typeof e)return{type:"message",data:a(e,t)};const n=e.charAt(0);return"b"===n?{type:"message",data:s(e.substring(1),t)}:r[n]?e.length>1?{type:r[n],data:e.substring(1)}:{type:r[n]}:o}},2929:(e,t,n)=>{const{PACKET_TYPES:r}=n(1712),o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),i="function"==typeof ArrayBuffer,s=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)};e.exports=({type:e,data:t},n,a)=>{return o&&t instanceof Blob?n?a(t):s(t,a):i&&(t instanceof ArrayBuffer||(c=t,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(c):c&&c.buffer instanceof ArrayBuffer))?n?a(t instanceof ArrayBuffer?t:t.buffer):s(new Blob([t]),a):a(r[e]+(t||""));var c}},9743:(e,t,n)=>{const r=n(2929),o=n(4965),i=String.fromCharCode(30);e.exports={protocol:4,encodePacket:r,encodePayload:(e,t)=>{const n=e.length,o=new Array(n);let s=0;e.forEach(((e,a)=>{r(e,!1,(e=>{o[a]=e,++s===n&&t(o.join(i))}))}))},decodePacket:o,decodePayload:(e,t)=>{const n=e.split(i),r=[];for(let e=0;e<n.length;e++){const i=o(n[e],t);if(r.push(i),"error"===i.type)break}return r}}},8058:e=>{try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},8018:(e,t,n)=>{"use strict";var r=n(8178);e.exports=function(e,t,n){var o=[],i=!1,s=!1;function a(){if(i)throw new Error("Nested m.redraw.sync() call");i=!0;for(var t=0;t<o.length;t+=2)try{e(o[t],r(o[t+1]),c)}catch(e){n.error(e)}i=!1}function c(){s||(s=!0,t((function(){s=!1,a()})))}return c.sync=a,{mount:function(t,n){if(null!=n&&null==n.view&&"function"!=typeof n)throw new TypeError("m.mount(element, component) expects a component, not a vnode");var i=o.indexOf(t);i>=0&&(o.splice(i,2),e(t,[],c)),null!=n&&(o.push(t,n),e(t,r(n),c))},redraw:c}}},3223:(e,t,n)=>{"use strict";var r=n(8178),o=n(373),i=n(5164),s=n(249),a=n(8561),c=n(7562),l=n(1127),u={};e.exports=function(e,t){var n;function h(t,r,o){if(t=s(t,r),null!=n){n();var i=o?o.state:null,a=o?o.title:null;o&&o.replace?e.history.replaceState(i,a,v.prefix+t):e.history.pushState(i,a,v.prefix+t)}else e.location.href=v.prefix+t}var f,d,p,g,m=u,y=v.SKIP={};function v(o,s,k){if(null==o)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");var w,b=0,C=Object.keys(k).map((function(e){if("/"!==e[0])throw new SyntaxError("Routes must start with a `/`");if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw new SyntaxError("Route parameter names must be separated with either `/`, `.`, or `-`");return{route:e,component:k[e],check:c(e)}})),S="function"==typeof setImmediate?setImmediate:setTimeout,x=i.resolve(),P=!1;if(n=null,null!=s){var E=a(s);if(!C.some((function(e){return e.check(E)})))throw new ReferenceError("Default route doesn't match any known routes")}function M(){P=!1;var n=e.location.hash;"#"!==v.prefix[0]&&(n=e.location.search+n,"?"!==v.prefix[0]&&"/"!==(n=e.location.pathname+n)[0]&&(n="/"+n));var r=n.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent).slice(v.prefix.length),o=a(r);function i(){if(r===s)throw new Error("Could not resolve default route "+s);h(s,null,{replace:!0})}l(o.params,e.history.state),function e(n){for(;n<C.length;n++)if(C[n].check(o)){var s=C[n].component,a=C[n].route,c=s,l=g=function(i){if(l===g){if(i===y)return e(n+1);f=null==i||"function"!=typeof i.view&&"function"!=typeof i?"div":i,d=o.params,p=r,g=null,m=s.render?s:null,2===b?t.redraw():(b=2,t.redraw.sync())}};return void(s.view||"function"==typeof s?(s={},l(c)):s.onmatch?x.then((function(){return s.onmatch(o.params,r,a)})).then(l,i):l("div"))}i()}(0)}return n=function(){P||(P=!0,S(M))},"function"==typeof e.history.pushState?(w=function(){e.removeEventListener("popstate",n,!1)},e.addEventListener("popstate",n,!1)):"#"===v.prefix[0]&&(n=null,w=function(){e.removeEventListener("hashchange",M,!1)},e.addEventListener("hashchange",M,!1)),t.mount(o,{onbeforeupdate:function(){return!(!(b=b?2:1)||u===m)},oncreate:M,onremove:w,view:function(){if(b&&u!==m){var e=[r(f,d.key,d)];return m&&(e=m.render(e[0])),e}}})}return v.set=function(e,t,n){null!=g&&((n=n||{}).replace=!0),g=null,h(e,t,n)},v.get=function(){return p},v.prefix="#!",v.Link={view:function(e){var t,n,r=e.attrs.options,i={};l(i,e.attrs),i.selector=i.options=i.key=i.oninit=i.oncreate=i.onbeforeupdate=i.onupdate=i.onbeforeremove=i.onremove=null;var s=o(e.attrs.selector||"a",i,e.children);return(s.attrs.disabled=Boolean(s.attrs.disabled))?(s.attrs.href=null,s.attrs["aria-disabled"]="true",s.attrs.onclick=null):(t=s.attrs.onclick,n=s.attrs.href,s.attrs.href=v.prefix+n,s.attrs.onclick=function(e){var o;"function"==typeof t?o=t.call(e.currentTarget,e):null==t||"object"!=typeof t||"function"==typeof t.handleEvent&&t.handleEvent(e),!1===o||e.defaultPrevented||0!==e.button&&0!==e.which&&1!==e.which||e.currentTarget.target&&"_self"!==e.currentTarget.target||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey||(e.preventDefault(),e.redraw=!1,v.set(n,null,r))}),s}},v.param=function(e){return d&&null!=e?d[e]:d},v}},1262:(e,t,n)=>{"use strict";var r=n(373);r.trust=n(4742),r.fragment=n(9621),e.exports=r},865:(e,t,n)=>{"use strict";var r=n(1262),o=n(9074),i=n(9165),s=function(){return r.apply(this,arguments)};s.m=r,s.trust=r.trust,s.fragment=r.fragment,s.mount=i.mount,s.route=n(843),s.render=n(5358),s.redraw=i.redraw,s.request=o.request,s.jsonp=o.jsonp,s.parseQueryString=n(9874),s.buildQueryString=n(478),s.parsePathname=n(8561),s.buildPathname=n(249),s.vnode=n(8178),s.PromisePolyfill=n(2803),e.exports=s},9165:(e,t,n)=>{"use strict";var r=n(5358);e.exports=n(8018)(r,requestAnimationFrame,console)},1127:e=>{"use strict";e.exports=Object.assign||function(e,t){t&&Object.keys(t).forEach((function(n){e[n]=t[n]}))}},249:(e,t,n)=>{"use strict";var r=n(478),o=n(1127);e.exports=function(e,t){if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw new SyntaxError("Template parameter names *must* be separated");if(null==t)return e;var n=e.indexOf("?"),i=e.indexOf("#"),s=i<0?e.length:i,a=n<0?s:n,c=e.slice(0,a),l={};o(l,t);var u=c.replace(/:([^\/\.-]+)(\.{3})?/g,(function(e,n,r){return delete l[n],null==t[n]?e:r?t[n]:encodeURIComponent(String(t[n]))})),h=u.indexOf("?"),f=u.indexOf("#"),d=f<0?u.length:f,p=h<0?d:h,g=u.slice(0,p);n>=0&&(g+=e.slice(n,s)),h>=0&&(g+=(n<0?"?":"&")+u.slice(h,d));var m=r(l);return m&&(g+=(n<0&&h<0?"?":"&")+m),i>=0&&(g+=e.slice(i)),f>=0&&(g+=(i<0?"":"&")+u.slice(f)),g}},7562:(e,t,n)=>{"use strict";var r=n(8561);e.exports=function(e){var t=r(e),n=Object.keys(t.params),o=[],i=new RegExp("^"+t.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,(function(e,t,n){return null==t?"\\"+e:(o.push({k:t,r:"..."===n}),"..."===n?"(.*)":"."===n?"([^/]+)\\.":"([^/]+)"+(n||""))}))+"$");return function(e){for(var r=0;r<n.length;r++)if(t.params[n[r]]!==e.params[n[r]])return!1;if(!o.length)return i.test(e.path);var s=i.exec(e.path);if(null==s)return!1;for(r=0;r<o.length;r++)e.params[o[r].k]=o[r].r?s[r+1]:decodeURIComponent(s[r+1]);return!0}}},8561:(e,t,n)=>{"use strict";var r=n(9874);e.exports=function(e){var t=e.indexOf("?"),n=e.indexOf("#"),o=n<0?e.length:n,i=t<0?o:t,s=e.slice(0,i).replace(/\/{2,}/g,"/");return s?("/"!==s[0]&&(s="/"+s),s.length>1&&"/"===s[s.length-1]&&(s=s.slice(0,-1))):s="/",{path:s,params:t<0?{}:r(e.slice(t+1,o))}}},2803:e=>{"use strict";var t=function(e){if(!(this instanceof t))throw new Error("Promise must be called with `new`");if("function"!=typeof e)throw new TypeError("executor must be a function");var n=this,r=[],o=[],i=l(r,!0),s=l(o,!1),a=n._instance={resolvers:r,rejectors:o},c="function"==typeof setImmediate?setImmediate:setTimeout;function l(e,t){return function i(l){var h;try{if(!t||null==l||"object"!=typeof l&&"function"!=typeof l||"function"!=typeof(h=l.then))c((function(){t||0!==e.length||console.error("Possible unhandled promise rejection:",l);for(var n=0;n<e.length;n++)e[n](l);r.length=0,o.length=0,a.state=t,a.retry=function(){i(l)}}));else{if(l===n)throw new TypeError("Promise can't be resolved w/ itself");u(h.bind(l))}}catch(e){s(e)}}}function u(e){var t=0;function n(e){return function(n){t++>0||e(n)}}var r=n(s);try{e(n(i),r)}catch(e){r(e)}}u(e)};t.prototype.then=function(e,n){var r,o,i=this._instance;function s(e,t,n,s){t.push((function(t){if("function"!=typeof e)n(t);else try{r(e(t))}catch(e){o&&o(e)}})),"function"==typeof i.retry&&s===i.state&&i.retry()}var a=new t((function(e,t){r=e,o=t}));return s(e,i.resolvers,r,!0),s(n,i.rejectors,o,!1),a},t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(e){return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))},t.resolve=function(e){return e instanceof t?e:new t((function(t){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.all=function(e){return new t((function(t,n){var r=e.length,o=0,i=[];if(0===e.length)t([]);else for(var s=0;s<e.length;s++)!function(s){function a(e){o++,i[s]=e,o===r&&t(i)}null==e[s]||"object"!=typeof e[s]&&"function"!=typeof e[s]||"function"!=typeof e[s].then?a(e[s]):e[s].then(a,n)}(s)}))},t.race=function(e){return new t((function(t,n){for(var r=0;r<e.length;r++)e[r].then(t,n)}))},e.exports=t},5164:(e,t,n)=>{"use strict";var r=n(2803);"undefined"!=typeof window?(void 0===window.Promise?window.Promise=r:window.Promise.prototype.finally||(window.Promise.prototype.finally=r.prototype.finally),e.exports=window.Promise):void 0!==n.g?(void 0===n.g.Promise?n.g.Promise=r:n.g.Promise.prototype.finally||(n.g.Promise.prototype.finally=r.prototype.finally),e.exports=n.g.Promise):e.exports=r},478:e=>{"use strict";e.exports=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return"";var t=[];for(var n in e)r(n,e[n]);return t.join("&");function r(e,n){if(Array.isArray(n))for(var o=0;o<n.length;o++)r(e+"["+o+"]",n[o]);else if("[object Object]"===Object.prototype.toString.call(n))for(var o in n)r(e+"["+o+"]",n[o]);else t.push(encodeURIComponent(e)+(null!=n&&""!==n?"="+encodeURIComponent(n):""))}}},9874:e=>{"use strict";e.exports=function(e){if(""===e||null==e)return{};"?"===e.charAt(0)&&(e=e.slice(1));for(var t=e.split("&"),n={},r={},o=0;o<t.length;o++){var i=t[o].split("="),s=decodeURIComponent(i[0]),a=2===i.length?decodeURIComponent(i[1]):"";"true"===a?a=!0:"false"===a&&(a=!1);var c=s.split(/\]\[?|\[/),l=r;s.indexOf("[")>-1&&c.pop();for(var u=0;u<c.length;u++){var h=c[u],f=c[u+1],d=""==f||!isNaN(parseInt(f,10));if(""===h)null==n[s=c.slice(0,u).join()]&&(n[s]=Array.isArray(l)?l.length:0),h=n[s]++;else if("__proto__"===h)break;if(u===c.length-1)l[h]=a;else{var p=Object.getOwnPropertyDescriptor(l,h);null!=p&&(p=p.value),null==p&&(l[h]=p=d?[]:{}),l=p}}}return r}},5358:(e,t,n)=>{"use strict";e.exports=n(5452)(window)},9621:(e,t,n)=>{"use strict";var r=n(8178),o=n(1359);e.exports=function(){var e=o.apply(0,arguments);return e.tag="[",e.children=r.normalizeChildren(e.children),e}},373:(e,t,n)=>{"use strict";var r=n(8178),o=n(1359),i=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,s={},a={}.hasOwnProperty;function c(e){for(var t in e)if(a.call(e,t))return!1;return!0}function l(e){for(var t,n="div",r=[],o={};t=i.exec(e);){var a=t[1],c=t[2];if(""===a&&""!==c)n=c;else if("#"===a)o.id=c;else if("."===a)r.push(c);else if("["===t[3][0]){var l=t[6];l&&(l=l.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===t[4]?r.push(l):o[t[4]]=""===l?l:l||!0}}return r.length>0&&(o.className=r.join(" ")),s[e]={tag:n,attrs:o}}function u(e,t){var n=t.attrs,o=r.normalizeChildren(t.children),i=a.call(n,"class"),s=i?n.class:n.className;if(t.tag=e.tag,t.attrs=null,t.children=void 0,!c(e.attrs)&&!c(n)){var l={};for(var u in n)a.call(n,u)&&(l[u]=n[u]);n=l}for(var u in e.attrs)a.call(e.attrs,u)&&"className"!==u&&!a.call(n,u)&&(n[u]=e.attrs[u]);for(var u in null==s&&null==e.attrs.className||(n.className=null!=s?null!=e.attrs.className?String(e.attrs.className)+" "+String(s):s:null!=e.attrs.className?e.attrs.className:null),i&&(n.class=null),n)if(a.call(n,u)&&"key"!==u){t.attrs=n;break}return Array.isArray(o)&&1===o.length&&null!=o[0]&&"#"===o[0].tag?t.text=o[0].children:t.children=o,t}e.exports=function(e){if(null==e||"string"!=typeof e&&"function"!=typeof e&&"function"!=typeof e.view)throw Error("The selector must be either a string or a component.");var t=o.apply(1,arguments);return"string"==typeof e&&(t.children=r.normalizeChildren(t.children),"["!==e)?u(s[e]||l(e),t):(t.tag=e,t)}},1359:(e,t,n)=>{"use strict";var r=n(8178);e.exports=function(){var e,t=arguments[this],n=this+1;if(null==t?t={}:("object"!=typeof t||null!=t.tag||Array.isArray(t))&&(t={},n=this),arguments.length===n+1)e=arguments[n],Array.isArray(e)||(e=[e]);else for(e=[];n<arguments.length;)e.push(arguments[n++]);return r("",t.key,t,e)}},5452:(e,t,n)=>{"use strict";var r=n(8178);e.exports=function(e){var t,n=e&&e.document,o={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function i(e){return e.attrs&&e.attrs.xmlns||o[e.tag]}function s(e,t){if(e.state!==t)throw new Error("`vnode.state` must not be modified")}function a(e){var t=e.state;try{return this.apply(t,arguments)}finally{s(e,t)}}function c(){try{return n.activeElement}catch(e){return null}}function l(e,t,n,r,o,i,s){for(var a=n;a<r;a++){var c=t[a];null!=c&&u(e,c,o,s,i)}}function u(e,t,o,s,c){var h=t.tag;if("string"==typeof h)switch(t.state={},null!=t.attrs&&N(t.attrs,t,o),h){case"#":!function(e,t,r){t.dom=n.createTextNode(t.children),w(e,t.dom,r)}(e,t,c);break;case"<":f(e,t,s,c);break;case"[":!function(e,t,r,o,i){var s=n.createDocumentFragment();if(null!=t.children){var a=t.children;l(s,a,0,a.length,r,null,o)}t.dom=s.firstChild,t.domSize=s.childNodes.length,w(e,s,i)}(e,t,o,s,c);break;default:!function(e,t,o,s,a){var c=t.tag,u=t.attrs,h=u&&u.is,f=(s=i(t)||s)?h?n.createElementNS(s,c,{is:h}):n.createElementNS(s,c):h?n.createElement(c,{is:h}):n.createElement(c);if(t.dom=f,null!=u&&function(e,t,n){for(var r in t)M(e,r,null,t[r],n)}(t,u,s),w(e,f,a),!b(t)&&(null!=t.text&&(""!==t.text?f.textContent=t.text:t.children=[r("#",void 0,void 0,t.text,void 0,void 0)]),null!=t.children)){var d=t.children;l(f,d,0,d.length,o,null,s),"select"===t.tag&&null!=u&&function(e,t){if("value"in t)if(null===t.value)-1!==e.dom.selectedIndex&&(e.dom.value=null);else{var n=""+t.value;e.dom.value===n&&-1!==e.dom.selectedIndex||(e.dom.value=n)}"selectedIndex"in t&&M(e,"selectedIndex",null,t.selectedIndex,void 0)}(t,u)}}(e,t,o,s,c)}else!function(e,t,n,o,i){(function(e,t){var n;if("function"==typeof e.tag.view){if(e.state=Object.create(e.tag),null!=(n=e.state.view).$$reentrantLock$$)return;n.$$reentrantLock$$=!0}else{if(e.state=void 0,null!=(n=e.tag).$$reentrantLock$$)return;n.$$reentrantLock$$=!0,e.state=null!=e.tag.prototype&&"function"==typeof e.tag.prototype.view?new e.tag(e):e.tag(e)}if(N(e.state,e,t),null!=e.attrs&&N(e.attrs,e,t),e.instance=r.normalize(a.call(e.state.view,e)),e.instance===e)throw Error("A view cannot return the vnode it received as argument");n.$$reentrantLock$$=null})(t,n),null!=t.instance?(u(e,t.instance,n,o,i),t.dom=t.instance.dom,t.domSize=null!=t.dom?t.instance.domSize:0):t.domSize=0}(e,t,o,s,c)}var h={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function f(e,t,r,o){var i=t.children.match(/^\s*?<(\w+)/im)||[],s=n.createElement(h[i[1]]||"div");"http://www.w3.org/2000/svg"===r?(s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t.children+"</svg>",s=s.firstChild):s.innerHTML=t.children,t.dom=s.firstChild,t.domSize=s.childNodes.length,t.instance=[];for(var a,c=n.createDocumentFragment();a=s.firstChild;)t.instance.push(a),c.appendChild(a);w(e,c,o)}function d(e,t,n,r,o,i){if(t!==n&&(null!=t||null!=n))if(null==t||0===t.length)l(e,n,0,n.length,r,o,i);else if(null==n||0===n.length)C(e,t,0,t.length);else{var s=null!=t[0]&&null!=t[0].key,a=null!=n[0]&&null!=n[0].key,c=0,h=0;if(!s)for(;h<t.length&&null==t[h];)h++;if(!a)for(;c<n.length&&null==n[c];)c++;if(null===a&&null==s)return;if(s!==a)C(e,t,h,t.length),l(e,n,c,n.length,r,o,i);else if(a){for(var f,d,k,w,b,x=t.length-1,P=n.length-1;x>=h&&P>=c&&(k=t[x],w=n[P],k.key===w.key);)k!==w&&p(e,k,w,r,o,i),null!=w.dom&&(o=w.dom),x--,P--;for(;x>=h&&P>=c&&(f=t[h],d=n[c],f.key===d.key);)h++,c++,f!==d&&p(e,f,d,r,y(t,h,o),i);for(;x>=h&&P>=c&&c!==P&&f.key===w.key&&k.key===d.key;)v(e,k,b=y(t,h,o)),k!==d&&p(e,k,d,r,b,i),++c<=--P&&v(e,f,o),f!==w&&p(e,f,w,r,o,i),null!=w.dom&&(o=w.dom),h++,k=t[--x],w=n[P],f=t[h],d=n[c];for(;x>=h&&P>=c&&k.key===w.key;)k!==w&&p(e,k,w,r,o,i),null!=w.dom&&(o=w.dom),P--,k=t[--x],w=n[P];if(c>P)C(e,t,h,x+1);else if(h>x)l(e,n,c,P+1,r,o,i);else{var E,M,_=o,B=P-c+1,A=new Array(B),L=0,T=0,F=2147483647,q=0;for(T=0;T<B;T++)A[T]=-1;for(T=P;T>=c;T--){null==E&&(E=g(t,h,x+1));var O=E[(w=n[T]).key];null!=O&&(F=O<F?O:-1,A[T-c]=O,k=t[O],t[O]=null,k!==w&&p(e,k,w,r,o,i),null!=w.dom&&(o=w.dom),q++)}if(o=_,q!==x-h+1&&C(e,t,h,x+1),0===q)l(e,n,c,P+1,r,o,i);else if(-1===F)for(L=(M=function(e){var t=[0],n=0,r=0,o=0,i=m.length=e.length;for(o=0;o<i;o++)m[o]=e[o];for(o=0;o<i;++o)if(-1!==e[o]){var s=t[t.length-1];if(e[s]<e[o])m[o]=s,t.push(o);else{for(n=0,r=t.length-1;n<r;){var a=(n>>>1)+(r>>>1)+(n&r&1);e[t[a]]<e[o]?n=a+1:r=a}e[o]<e[t[n]]&&(n>0&&(m[o]=t[n-1]),t[n]=o)}}for(r=t[(n=t.length)-1];n-- >0;)t[n]=r,r=m[r];return m.length=0,t}(A)).length-1,T=P;T>=c;T--)d=n[T],-1===A[T-c]?u(e,d,r,i,o):M[L]===T-c?L--:v(e,d,o),null!=d.dom&&(o=n[T].dom);else for(T=P;T>=c;T--)d=n[T],-1===A[T-c]&&u(e,d,r,i,o),null!=d.dom&&(o=n[T].dom)}}else{var j=t.length<n.length?t.length:n.length;for(c=c<h?c:h;c<j;c++)(f=t[c])===(d=n[c])||null==f&&null==d||(null==f?u(e,d,r,i,y(t,c+1,o)):null==d?S(e,f):p(e,f,d,r,y(t,c+1,o),i));t.length>j&&C(e,t,c,t.length),n.length>j&&l(e,n,c,n.length,r,o,i)}}}function p(e,t,n,o,s,c){var l=t.tag;if(l===n.tag){if(n.state=t.state,n.events=t.events,function(e,t){do{var n;if(null!=e.attrs&&"function"==typeof e.attrs.onbeforeupdate&&void 0!==(n=a.call(e.attrs.onbeforeupdate,e,t))&&!n)break;if("string"!=typeof e.tag&&"function"==typeof e.state.onbeforeupdate&&void 0!==(n=a.call(e.state.onbeforeupdate,e,t))&&!n)break;return!1}while(0);return e.dom=t.dom,e.domSize=t.domSize,e.instance=t.instance,e.attrs=t.attrs,e.children=t.children,e.text=t.text,!0}(n,t))return;if("string"==typeof l)switch(null!=n.attrs&&R(n.attrs,n,o),l){case"#":!function(e,t){e.children.toString()!==t.children.toString()&&(e.dom.nodeValue=t.children),t.dom=e.dom}(t,n);break;case"<":!function(e,t,n,r,o){t.children!==n.children?(x(e,t),f(e,n,r,o)):(n.dom=t.dom,n.domSize=t.domSize,n.instance=t.instance)}(e,t,n,c,s);break;case"[":!function(e,t,n,r,o,i){d(e,t.children,n.children,r,o,i);var s=0,a=n.children;if(n.dom=null,null!=a){for(var c=0;c<a.length;c++){var l=a[c];null!=l&&null!=l.dom&&(null==n.dom&&(n.dom=l.dom),s+=l.domSize||1)}1!==s&&(n.domSize=s)}}(e,t,n,o,s,c);break;default:!function(e,t,n,o){var s=t.dom=e.dom;o=i(t)||o,"textarea"===t.tag&&(null==t.attrs&&(t.attrs={}),null!=t.text&&(t.attrs.value=t.text,t.text=void 0)),function(e,t,n,r){if(null!=n)for(var o in n)M(e,o,t&&t[o],n[o],r);var i;if(null!=t)for(var o in t)null==(i=t[o])||null!=n&&null!=n[o]||_(e,o,i,r)}(t,e.attrs,t.attrs,o),b(t)||(null!=e.text&&null!=t.text&&""!==t.text?e.text.toString()!==t.text.toString()&&(e.dom.firstChild.nodeValue=t.text):(null!=e.text&&(e.children=[r("#",void 0,void 0,e.text,void 0,e.dom.firstChild)]),null!=t.text&&(t.children=[r("#",void 0,void 0,t.text,void 0,void 0)]),d(s,e.children,t.children,n,null,o)))}(t,n,o,c)}else!function(e,t,n,o,i,s){if(n.instance=r.normalize(a.call(n.state.view,n)),n.instance===n)throw Error("A view cannot return the vnode it received as argument");R(n.state,n,o),null!=n.attrs&&R(n.attrs,n,o),null!=n.instance?(null==t.instance?u(e,n.instance,o,s,i):p(e,t.instance,n.instance,o,i,s),n.dom=n.instance.dom,n.domSize=n.instance.domSize):null!=t.instance?(S(e,t.instance),n.dom=void 0,n.domSize=0):(n.dom=t.dom,n.domSize=t.domSize)}(e,t,n,o,s,c)}else S(e,t),u(e,n,o,c,s)}function g(e,t,n){for(var r=Object.create(null);t<n;t++){var o=e[t];if(null!=o){var i=o.key;null!=i&&(r[i]=t)}}return r}var m=[];function y(e,t,n){for(;t<e.length;t++)if(null!=e[t]&&null!=e[t].dom)return e[t].dom;return n}function v(e,t,r){var o=n.createDocumentFragment();k(e,o,t),w(e,o,r)}function k(e,t,n){for(;null!=n.dom&&n.dom.parentNode===e;){if("string"!=typeof n.tag){if(null!=(n=n.instance))continue}else if("<"===n.tag)for(var r=0;r<n.instance.length;r++)t.appendChild(n.instance[r]);else if("["!==n.tag)t.appendChild(n.dom);else if(1===n.children.length){if(null!=(n=n.children[0]))continue}else for(r=0;r<n.children.length;r++){var o=n.children[r];null!=o&&k(e,t,o)}break}}function w(e,t,n){null!=n?e.insertBefore(t,n):e.appendChild(t)}function b(e){if(null==e.attrs||null==e.attrs.contenteditable&&null==e.attrs.contentEditable)return!1;var t=e.children;if(null!=t&&1===t.length&&"<"===t[0].tag){var n=t[0].children;e.dom.innerHTML!==n&&(e.dom.innerHTML=n)}else if(null!=e.text||null!=t&&0!==t.length)throw new Error("Child node of a contenteditable must be trusted");return!0}function C(e,t,n,r){for(var o=n;o<r;o++){var i=t[o];null!=i&&S(e,i)}}function S(e,t){var n,r,o,i=0,c=t.state;if("string"!=typeof t.tag&&"function"==typeof t.state.onbeforeremove&&null!=(o=a.call(t.state.onbeforeremove,t))&&"function"==typeof o.then&&(i=1,n=o),t.attrs&&"function"==typeof t.attrs.onbeforeremove&&null!=(o=a.call(t.attrs.onbeforeremove,t))&&"function"==typeof o.then&&(i|=2,r=o),s(t,c),i){if(null!=n){var l=function(){1&i&&((i&=2)||u())};n.then(l,l)}null!=r&&(l=function(){2&i&&((i&=1)||u())},r.then(l,l))}else E(t),P(e,t);function u(){s(t,c),E(t),P(e,t)}}function x(e,t){for(var n=0;n<t.instance.length;n++)e.removeChild(t.instance[n])}function P(e,t){for(;null!=t.dom&&t.dom.parentNode===e;){if("string"!=typeof t.tag){if(null!=(t=t.instance))continue}else if("<"===t.tag)x(e,t);else{if("["!==t.tag&&(e.removeChild(t.dom),!Array.isArray(t.children)))break;if(1===t.children.length){if(null!=(t=t.children[0]))continue}else for(var n=0;n<t.children.length;n++){var r=t.children[n];null!=r&&P(e,r)}}break}}function E(e){if("string"!=typeof e.tag&&"function"==typeof e.state.onremove&&a.call(e.state.onremove,e),e.attrs&&"function"==typeof e.attrs.onremove&&a.call(e.attrs.onremove,e),"string"!=typeof e.tag)null!=e.instance&&E(e.instance);else{var t=e.children;if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];null!=r&&E(r)}}}function M(e,t,r,o,i){if("key"!==t&&"is"!==t&&null!=o&&!B(t)&&(r!==o||function(e,t){return"value"===t||"checked"===t||"selectedIndex"===t||"selected"===t&&e.dom===c()||"option"===e.tag&&e.dom.parentNode===n.activeElement}(e,t)||"object"==typeof o)){if("o"===t[0]&&"n"===t[1])return j(e,t,o);if("xlink:"===t.slice(0,6))e.dom.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(6),o);else if("style"===t)q(e.dom,r,o);else if(A(e,t,i)){if("value"===t){if(("input"===e.tag||"textarea"===e.tag)&&e.dom.value===""+o&&e.dom===c())return;if("select"===e.tag&&null!==r&&e.dom.value===""+o)return;if("option"===e.tag&&null!==r&&e.dom.value===""+o)return}"input"===e.tag&&"type"===t?e.dom.setAttribute(t,o):e.dom[t]=o}else"boolean"==typeof o?o?e.dom.setAttribute(t,""):e.dom.removeAttribute(t):e.dom.setAttribute("className"===t?"class":t,o)}}function _(e,t,n,r){if("key"!==t&&"is"!==t&&null!=n&&!B(t))if("o"!==t[0]||"n"!==t[1]||B(t))if("style"===t)q(e.dom,n,null);else if(!A(e,t,r)||"className"===t||"value"===t&&("option"===e.tag||"select"===e.tag&&-1===e.dom.selectedIndex&&e.dom===c())||"input"===e.tag&&"type"===t){var o=t.indexOf(":");-1!==o&&(t=t.slice(o+1)),!1!==n&&e.dom.removeAttribute("className"===t?"class":t)}else e.dom[t]=null;else j(e,t,void 0)}function B(e){return"oninit"===e||"oncreate"===e||"onupdate"===e||"onremove"===e||"onbeforeremove"===e||"onbeforeupdate"===e}function A(e,t,n){return void 0===n&&(e.tag.indexOf("-")>-1||null!=e.attrs&&e.attrs.is||"href"!==t&&"list"!==t&&"form"!==t&&"width"!==t&&"height"!==t)&&t in e.dom}var L=/[A-Z]/g;function T(e){return"-"+e.toLowerCase()}function F(e){return"-"===e[0]&&"-"===e[1]?e:"cssFloat"===e?"float":e.replace(L,T)}function q(e,t,n){if(t===n);else if(null==n)e.style.cssText="";else if("object"!=typeof n)e.style.cssText=n;else if(null==t||"object"!=typeof t)for(var r in e.style.cssText="",n)null!=(o=n[r])&&e.style.setProperty(F(r),String(o));else{for(var r in n){var o;null!=(o=n[r])&&(o=String(o))!==String(t[r])&&e.style.setProperty(F(r),o)}for(var r in t)null!=t[r]&&null==n[r]&&e.style.removeProperty(F(r))}}function O(){this._=t}function j(e,t,n){if(null!=e.events){if(e.events[t]===n)return;null==n||"function"!=typeof n&&"object"!=typeof n?(null!=e.events[t]&&e.dom.removeEventListener(t.slice(2),e.events,!1),e.events[t]=void 0):(null==e.events[t]&&e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=n)}else null==n||"function"!=typeof n&&"object"!=typeof n||(e.events=new O,e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=n)}function N(e,t,n){"function"==typeof e.oninit&&a.call(e.oninit,t),"function"==typeof e.oncreate&&n.push(a.bind(e.oncreate,t))}function R(e,t,n){"function"==typeof e.onupdate&&n.push(a.bind(e.onupdate,t))}return O.prototype=Object.create(null),O.prototype.handleEvent=function(e){var t,n=this["on"+e.type];"function"==typeof n?t=n.call(e.currentTarget,e):"function"==typeof n.handleEvent&&n.handleEvent(e),this._&&!1!==e.redraw&&(0,this._)(),!1===t&&(e.preventDefault(),e.stopPropagation())},function(e,n,o){if(!e)throw new TypeError("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var i=[],s=c(),a=e.namespaceURI;null==e.vnodes&&(e.textContent=""),n=r.normalizeChildren(Array.isArray(n)?n:[n]);var l=t;try{t="function"==typeof o?o:void 0,d(e,e.vnodes,n,i,null,"http://www.w3.org/1999/xhtml"===a?void 0:a)}finally{t=l}e.vnodes=n,null!=s&&c()!==s&&"function"==typeof s.focus&&s.focus();for(var u=0;u<i.length;u++)i[u]()}}},4742:(e,t,n)=>{"use strict";var r=n(8178);e.exports=function(e){return null==e&&(e=""),r("<",void 0,void 0,e,void 0,void 0)}},8178:e=>{"use strict";function t(e,t,n,r,o,i){return{tag:e,key:t,attrs:n,children:r,text:o,dom:i,domSize:void 0,state:void 0,events:void 0,instance:void 0}}t.normalize=function(e){return Array.isArray(e)?t("[",void 0,void 0,t.normalizeChildren(e),void 0,void 0):null==e||"boolean"==typeof e?null:"object"==typeof e?e:t("#",void 0,void 0,String(e),void 0,void 0)},t.normalizeChildren=function(e){var n=[];if(e.length){for(var r=null!=e[0]&&null!=e[0].key,o=1;o<e.length;o++)if((null!=e[o]&&null!=e[o].key)!==r)throw new TypeError("Vnodes must either always have keys or never have keys!");for(o=0;o<e.length;o++)n[o]=t.normalize(e[o])}return n},e.exports=t},9074:(e,t,n)=>{"use strict";var r=n(5164),o=n(9165);e.exports=n(2775)(window,r,o.redraw)},2775:(e,t,n)=>{"use strict";var r=n(249);e.exports=function(e,t,n){var o=0;function i(e){return new t(e)}function s(e){return function(o,s){"string"!=typeof o?(s=o,o=o.url):null==s&&(s={});var a=new t((function(t,n){e(r(o,s.params),s,(function(e){if("function"==typeof s.type)if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=new s.type(e[n]);else e=new s.type(e);t(e)}),n)}));if(!0===s.background)return a;var c=0;function l(){0==--c&&"function"==typeof n&&n()}return function e(t){var n=t.then;return t.constructor=i,t.then=function(){c++;var r=n.apply(t,arguments);return r.then(l,(function(e){if(l(),0===c)throw e})),e(r)},t}(a)}}function a(e,t){for(var n in e.headers)if({}.hasOwnProperty.call(e.headers,n)&&t.test(n))return!0;return!1}return i.prototype=t.prototype,i.__proto__=t,{request:s((function(t,n,r,o){var i,s=null!=n.method?n.method.toUpperCase():"GET",c=n.body,l=!(null!=n.serialize&&n.serialize!==JSON.serialize||c instanceof e.FormData),u=n.responseType||("function"==typeof n.extract?"":"json"),h=new e.XMLHttpRequest,f=!1,d=h,p=h.abort;for(var g in h.abort=function(){f=!0,p.call(this)},h.open(s,t,!1!==n.async,"string"==typeof n.user?n.user:void 0,"string"==typeof n.password?n.password:void 0),l&&null!=c&&!a(n,/^content-type$/i)&&h.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof n.deserialize||a(n,/^accept$/i)||h.setRequestHeader("Accept","application/json, text/*"),n.withCredentials&&(h.withCredentials=n.withCredentials),n.timeout&&(h.timeout=n.timeout),h.responseType=u,n.headers)({}).hasOwnProperty.call(n.headers,g)&&h.setRequestHeader(g,n.headers[g]);h.onreadystatechange=function(e){if(!f&&4===e.target.readyState)try{var i,s=e.target.status>=200&&e.target.status<300||304===e.target.status||/^file:\/\//i.test(t),a=e.target.response;if("json"===u?e.target.responseType||"function"==typeof n.extract||(a=JSON.parse(e.target.responseText)):u&&"text"!==u||null==a&&(a=e.target.responseText),"function"==typeof n.extract?(a=n.extract(e.target,n),s=!0):"function"==typeof n.deserialize&&(a=n.deserialize(a)),s)r(a);else{try{i=e.target.responseText}catch(e){i=a}var c=new Error(i);c.code=e.target.status,c.response=a,o(c)}}catch(e){o(e)}},"function"==typeof n.config&&(h=n.config(h,n,t)||h)!==d&&(i=h.abort,h.abort=function(){f=!0,i.call(this)}),null==c?h.send():"function"==typeof n.serialize?h.send(n.serialize(c)):c instanceof e.FormData?h.send(c):h.send(JSON.stringify(c))})),jsonp:s((function(t,n,r,i){var s=n.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+o++,a=e.document.createElement("script");e[s]=function(t){delete e[s],a.parentNode.removeChild(a),r(t)},a.onerror=function(){delete e[s],a.parentNode.removeChild(a),i(new Error("JSONP request failed"))},a.src=t+(t.indexOf("?")<0?"?":"&")+encodeURIComponent(n.callbackKey||"callback")+"="+encodeURIComponent(s),e.document.documentElement.appendChild(a)}))}}},843:(e,t,n)=>{"use strict";var r=n(9165);e.exports=n(3223)(window,r)},7824:e=>{var t=1e3,n=60*t,r=60*n,o=24*r;function i(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}e.exports=function(e,s){s=s||{};var a,c,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(i){var s=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===l&&isFinite(e))return s.long?(a=e,(c=Math.abs(a))>=o?i(a,c,o,"day"):c>=r?i(a,c,r,"hour"):c>=n?i(a,c,n,"minute"):c>=t?i(a,c,t,"second"):a+" ms"):function(e){var i=Math.abs(e);return i>=o?Math.round(e/o)+"d":i>=r?Math.round(e/r)+"h":i>=n?Math.round(e/n)+"m":i>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},1830:(e,t)=>{t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},4187:e=>{var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var r,o,i=e,s=e.indexOf("["),a=e.indexOf("]");-1!=s&&-1!=a&&(e=e.substring(0,s)+e.substring(s,a).replace(/:/g,";")+e.substring(a,e.length));for(var c,l,u=t.exec(e||""),h={},f=14;f--;)h[n[f]]=u[f]||"";return-1!=s&&-1!=a&&(h.source=i,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=!0),h.pathNames=(r=h.path,o=r.replace(/\/{2,9}/g,"/").split("/"),"/"!=r.substr(0,1)&&0!==r.length||o.splice(0,1),"/"==r.substr(r.length-1,1)&&o.splice(o.length-1,1),o),h.queryKey=(c=h.query,l={},c.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(l[t]=n)})),l),h}},751:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=t.io=t.Manager=t.protocol=void 0;const r=n(6744),o=n(7703),i=n(2277);Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return i.Socket}});const s=n(1227)("socket.io-client");e.exports=t=c;const a=t.managers={};function c(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};const n=r.url(e),i=n.source,c=n.id,l=n.path,u=a[c]&&l in a[c].nsps;let h;return t.forceNew||t["force new connection"]||!1===t.multiplex||u?(s("ignoring socket cache for %s",i),h=new o.Manager(i,t)):(a[c]||(s("new io instance for %s",i),a[c]=new o.Manager(i,t)),h=a[c]),n.query&&!t.query&&(t.query=n.query),h.socket(n.path,t)}t.io=c;var l=n(5485);Object.defineProperty(t,"protocol",{enumerable:!0,get:function(){return l.protocol}}),t.connect=c;var u=n(7703);Object.defineProperty(t,"Manager",{enumerable:!0,get:function(){return u.Manager}})},7703:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Manager=void 0;const r=n(5983),o=n(2277),i=n(8767),s=n(5485),a=n(5657),c=n(6077),l=n(3010),u=n(1227)("socket.io-client:manager");t.Manager=class extends i{constructor(e,t){super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new l({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const n=t.parser||s;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(u("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=r(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const o=a.on(t,"open",(function(){n.onopen(),e&&e()})),i=a.on(t,"error",(t=>{u("error"),n.cleanup(),n._readyState="closed",super.emit("error",t),e?e(t):n.maybeReconnectOnOpen()}));if(!1!==this._timeout){const e=this._timeout;u("connect attempt will timeout after %d",e),0===e&&o.destroy();const n=setTimeout((()=>{u("connect attempt timed out after %d",e),o.destroy(),t.close(),t.emit("error",new Error("timeout"))}),e);this.subs.push({destroy:function(){clearTimeout(n)}})}return this.subs.push(o),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){u("open"),this.cleanup(),this._readyState="open",super.emit("open");const e=this.engine;this.subs.push(a.on(e,"data",c(this,"ondata")),a.on(e,"ping",c(this,"onping")),a.on(e,"error",c(this,"onerror")),a.on(e,"close",c(this,"onclose")),a.on(this.decoder,"decoded",c(this,"ondecoded")))}onping(){super.emit("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){super.emit("packet",e)}onerror(e){u("error",e),super.emit("error",e)}socket(e,t){let n=this.nsps[e];return n||(n=new o.Socket(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const e of t)if(this.nsps[e].active)return void u("socket %s is still active, skipping close",e);this._close()}_packet(e){u("writing packet %j",e),e.query&&0===e.type&&(e.nsp+="?"+e.query);const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){u("cleanup");const e=this.subs.length;for(let t=0;t<e;t++)this.subs.shift().destroy();this.decoder.destroy()}_close(){u("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e){u("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",super.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),super.emit("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();u("will wait %dms before reconnect attempt",t),this._reconnecting=!0;const n=setTimeout((()=>{e.skipReconnect||(u("attempting reconnect"),super.emit("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(u("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),super.emit("reconnect_error",t)):(u("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(n)}})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),super.emit("reconnect",e)}}},5657:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=void 0,t.on=function(e,t,n){return e.on(t,n),{destroy:function(){e.off(t,n)}}}},2277:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;const r=n(5485),o=n(8767),i=n(5657),s=n(6077),a=n(1227)("socket.io-client:socket"),c=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});t.Socket=class extends o{constructor(e,t,n){super(),this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.flags={},this.io=e,this.nsp=t,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const e=this.io;this.subs=[i.on(e,"open",s(this,"onopen")),i.on(e,"packet",s(this,"onpacket")),i.on(e,"close",s(this,"onclose"))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(c.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');t.unshift(e);const n={type:r.PacketType.EVENT,data:t,options:{}};n.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(a("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++);const o=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return!this.flags.volatile||o&&this.connected?this.connected?this.packet(n):this.sendBuffer.push(n):a("discard packet as the transport is not currently writable"),this.flags={},this}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){a("transport is open - connecting"),"function"==typeof this.auth?this.auth((e=>{this.packet({type:r.PacketType.CONNECT,data:e})})):this.packet({type:r.PacketType.CONNECT,data:this.auth})}onclose(e){a("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,super.emit("disconnect",e)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case r.PacketType.CONNECT:if(e.data&&e.data.sid){const t=e.data.sid;this.onconnect(t)}else super.emit("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case r.PacketType.EVENT:case r.PacketType.BINARY_EVENT:this.onevent(e);break;case r.PacketType.ACK:case r.PacketType.BINARY_ACK:this.onack(e);break;case r.PacketType.DISCONNECT:this.ondisconnect();break;case r.PacketType.CONNECT_ERROR:const t=new Error(e.data.message);t.data=e.data.data,super.emit("connect_error",t)}}onevent(e){const t=e.data||[];a("emitting event %j",t),null!=e.id&&(a("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e)}ack(e){const t=this;let n=!1;return function(...o){n||(n=!0,a("sending ack %j",o),t.packet({type:r.PacketType.ACK,id:e,data:o}))}}onack(e){const t=this.acks[e.id];"function"==typeof t?(a("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):a("bad ack %s",e.id)}onconnect(e){a("socket connected with id %s",e),this.id=e,this.connected=!0,this.disconnected=!1,super.emit("connect"),this.emitBuffered()}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>this.packet(e))),this.sendBuffer=[]}ondisconnect(){a("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){if(this.subs){for(let e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io._destroy(this)}disconnect(){return this.connected&&(a("performing disconnect (%s)",this.nsp),this.packet({type:r.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}},6744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.url=void 0;const r=n(4187),o=n(1227)("socket.io-client:url");t.url=function(e,t){let n=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),n=r(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port,n.href=n.protocol+"://"+i+(t&&t.port===n.port?"":":"+n.port),n}},7719:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reconstructPacket=t.deconstructPacket=void 0;const r=n(2986);function o(e,t){if(!e)return e;if(r.isBinary(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=o(e[r],t);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=o(e[r],t));return n}return e}function i(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=i(e[n],t);else if("object"==typeof e)for(const n in e)e.hasOwnProperty(n)&&(e[n]=i(e[n],t));return e}t.deconstructPacket=function(e){const t=[],n=e.data,r=e;return r.data=o(n,t),r.attachments=t.length,{packet:r,buffers:t}},t.reconstructPacket=function(e,t){return e.data=i(e.data,t),e.attachments=void 0,e}},5485:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.PacketType=t.protocol=void 0;const r=n(8767),o=n(7719),i=n(2986),s=n(1227)("socket.io-parser");var a;t.protocol=5,function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(a=t.PacketType||(t.PacketType={})),t.Encoder=class{encode(e){return s("encoding packet %j",e),e.type!==a.EVENT&&e.type!==a.ACK||!i.hasBinary(e)?[this.encodeAsString(e)]:(e.type=e.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,this.encodeAsBinary(e))}encodeAsString(e){let t=""+e.type;return e.type!==a.BINARY_EVENT&&e.type!==a.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data)),s("encoded %j as %s",e,t),t}encodeAsBinary(e){const t=o.deconstructPacket(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}};class c extends r{constructor(){super()}add(e){let t;if("string"==typeof e)t=this.decodeString(e),t.type===a.BINARY_EVENT||t.type===a.BINARY_ACK?(this.reconstructor=new l(t),0===t.attachments&&super.emit("decoded",t)):super.emit("decoded",t);else{if(!i.isBinary(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emit("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===a[n.type])throw new Error("unknown packet type "+n.type);if(n.type===a.BINARY_EVENT||n.type===a.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const o=e.substring(r,t);if(o!=Number(o)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!c.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return s("decoded %s as %j",e,n),n}static isPayloadValid(e,t){switch(e){case a.CONNECT:return"object"==typeof t;case a.DISCONNECT:return void 0===t;case a.CONNECT_ERROR:return"string"==typeof t||"object"==typeof t;case a.EVENT:case a.BINARY_EVENT:return Array.isArray(t)&&"string"==typeof t[0];case a.ACK:case a.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}t.Decoder=c;class l{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},2986:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasBinary=t.isBinary=void 0;const n="function"==typeof ArrayBuffer,r=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),i="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);function s(e){return n&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||o&&e instanceof Blob||i&&e instanceof File}t.isBinary=s,t.hasBinary=function e(t,n){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(e(t[n]))return!0;return!1}if(s(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return!0;return!1}},3379:(e,t,n)=>{"use strict";var r,o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),i=[];function s(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].identifier===e){t=n;break}return t}function a(e,t){for(var n={},r=[],o=0;o<e.length;o++){var a=e[o],c=t.base?a[0]+t.base:a[0],l=n[c]||0,u="".concat(c," ").concat(l);n[c]=l+1;var h=s(u),f={css:a[1],media:a[2],sourceMap:a[3]};-1!==h?(i[h].references++,i[h].updater(f)):i.push({identifier:u,updater:g(f,t),references:1}),r.push(u)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var s=o(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var l,u=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function h(e,t,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=u(t,o);else{var i=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function f(e,t,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var d=null,p=0;function g(e,t){var n,r,o;if(t.singleton){var i=p++;n=d||(d=c(t)),r=h.bind(null,n,i,!1),o=h.bind(null,n,i,!0)}else n=c(t),r=f.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var o=s(n[r]);i[o].references--}for(var c=a(e,t),l=0;l<n.length;l++){var u=s(n[l]);0===i[u].references&&(i[u].updater(),i.splice(u,1))}n=c}}}},2281:e=>{"use strict";var t,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r={},o=0,i=0;function s(e){var t="";do{t=n[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function a(){var e=s(+new Date);return e!==t?(o=0,t=e):e+"."+s(o++)}for(;i<64;i++)r[n[i]]=i;a.encode=s,a.decode=function(e){var t=0;for(i=0;i<e.length;i++)t=64*t+r[e.charAt(i)];return t},e.exports=a}},t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={id:r,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(865),t=n.n(e),r=n(751);r.Manager;for(var o,i,s=n(3071),a=function(e,n){return r=void 0,o=void 0,s=function(){var r;return function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,t().request({method:"POST",url:"/"+e,body:n,withCredentials:!0})];case 1:return[2,{body:o.sent(),status:200}];case 2:return[2,{body:(r=o.sent()).response,status:r.code}];case 3:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,a)}c((s=s.apply(r,o||[])).next())}));var r,o,i,s},c=0,l=0,u=function(){clearInterval(o)},h=function(){clearInterval(i)},f=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},d=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},p=s.initialPosition,g=s.Color.NoColor,m=!1,y=s.GameStatus.InProgress,v=s.Color.White,k=function(){return f(void 0,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return[4,a("live_games",{command:"start_computer_game"})];case 1:return[2,e.sent()]}}))}))},w=function(){return f(void 0,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return m=!0,[4,a("live_games",{command:"start_human_game"})];case 1:return[2,e.sent()]}}))}))},b=function(){return f(void 0,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return m=!1,[4,a("live_games",{command:"stop_request"})];case 1:return[2,e.sent()]}}))}))},C=function(){return f(void 0,void 0,void 0,(function(){var e,n,r;return d(this,(function(f){switch(f.label){case 0:return[4,a("live_games",{command:"get_game"})];case 1:return r=f.sent(),e=r.body,400<=(n=r.status)&&n<500?(p=s.initialPosition,y=s.GameStatus.NotPlaying,[2]):("white_username"in e&&e.white_username,"black_username"in e&&e.black_username,"fen"in e&&(p=(0,s.parseFen)(e.fen)),v=p.colorToMove,"status"in e&&(y=e.status,m=!1),u(),h(),"white_time_left"in e&&(w=e.white_time_left,c=w),"black_time_left"in e&&function(e){l=e}(e.black_time_left),v===s.Color.White&&y===s.GameStatus.InProgress&&(d=Date.now(),k=c,o=setInterval((function(){var e=Date.now();c=k-(e-d),console.log("white_time_left "+c),c<0?(u(),C()):t().redraw()}),1e3)),v===s.Color.Black&&y===s.GameStatus.InProgress&&function(){var e=Date.now(),n=l;i=setInterval((function(){var r=Date.now();l=n-(r-e),console.log("black_time_left "+l),l<0?(h(),C()):t().redraw()}),1e3)}(),"myColor"in e&&(g=e.myColor),[2])}var d,k,w}))}))},S=function(){return f(void 0,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return[4,a("live_games",{command:"resign"})];case 1:return[2,e.sent()]}}))}))},x={" ":" ","?":" ",r:'\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45" width="100%" height="100%">\n  <g style="opacity:1; fill:black; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">\n    <path\n      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "\n      style="stroke-linecap:butt;" />\n    <path\n      d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z "\n      style="stroke-linecap:butt;" />\n    <path\n      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "\n      style="stroke-linecap:butt;" />\n    <path\n      d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z "\n      style="stroke-linecap:butt;stroke-linejoin:miter;" />\n    <path\n      d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z "\n      style="stroke-linecap:butt;" />\n    <path\n      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z "\n      style="stroke-linecap:butt;" />\n    <path\n      d="M 12,35.5 L 33,35.5 L 33,35.5"\n      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />\n    <path\n      d="M 13,31.5 L 32,31.5"\n      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />\n    <path\n      d="M 14,29.5 L 31,29.5"\n      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />\n    <path\n      d="M 14,16.5 L 31,16.5"\n      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />\n    <path\n      d="M 11,14 L 34,14"\n      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />\n  </g>\n</svg>',R:'\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45" width="100%" height="100%">\n  <g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">\n    <path\n      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "\n      style="stroke-linecap:butt;" />\n    <path\n      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "\n      style="stroke-linecap:butt;" />\n    <path\n      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14"\n      style="stroke-linecap:butt;" />\n    <path\n      d="M 34,14 L 31,17 L 14,17 L 11,14" />\n    <path\n      d="M 31,17 L 31,29.5 L 14,29.5 L 14,17"\n      style="stroke-linecap:butt; stroke-linejoin:miter;" />\n    <path\n      d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5" />\n    <path\n      d="M 11,14 L 34,14"\n      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />\n  </g>\n</svg>',n:'\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45" width="100%" height="100%">\n  <g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">\n    <path\n      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"\n      style="fill:#000000; stroke:#000000;" />\n    <path\n      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"\n      style="fill:#000000; stroke:#000000;" />\n    <path\n      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"\n      style="fill:#ffffff; stroke:#ffffff;" />\n    <path\n      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"\n      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"\n      style="fill:#ffffff; stroke:#ffffff;" />\n    <path\n      d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z "\n      style="fill:#ffffff; stroke:none;" />\n  </g>\n</svg>',N:'\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45" width="100%" height="100%">\n  <g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">\n    <path\n      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"\n      style="fill:#ffffff; stroke:#000000;" />\n    <path\n      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"\n      style="fill:#ffffff; stroke:#000000;" />\n    <path\n      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"\n      style="fill:#000000; stroke:#000000;" />\n    <path\n      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"\n      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"\n      style="fill:#000000; stroke:#000000;" />\n  </g>\n</svg>',b:'\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45" width="100%" height="100%">\n  <g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">\n    <g style="fill:#000000; stroke:#000000; stroke-linecap:butt;"> \n      <path\n        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />\n      <path\n        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />\n      <path\n        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />\n    </g>\n    <path\n       d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"\n       style="fill:none; stroke:#ffffff; stroke-linejoin:miter;" />\n  </g>\n</svg>',B:'\n<svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 45 45" width="100%" height="100%">\n  <g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">\n    <g style="fill:#ffffff; stroke:#000000; stroke-linecap:butt;"> \n      <path\n        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />\n      <path\n        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />\n      <path\n        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />\n    </g>\n    <path\n      d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"\n      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />\n  </g>\n</svg>',q:'\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45" width="100%" height="100%">\n  <g style="opacity:1; fill:black; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">\n    <g style="fill:#000000; stroke:none;">\n      <circle cx="6"    cy="12" r="2.75" />\n      <circle cx="14"   cy="9"  r="2.75" />\n      <circle cx="22.5" cy="8"  r="2.75" />\n      <circle cx="31"   cy="9"  r="2.75" />\n      <circle cx="39"   cy="12" r="2.75" />\n    </g>\n    <path\n       d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"\n       style="stroke-linecap:butt; stroke:#000000;" />\n    <path\n       d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"\n       style="stroke-linecap:butt;" />\n    <path\n       d="M 11,38.5 A 35,35 1 0 0 34,38.5"\n       style="fill:none; stroke:#000000; stroke-linecap:butt;" />\n    <path\n       d="M 11,29 A 35,35 1 0 1 34,29"\n       style="fill:none; stroke:#ffffff;" />\n    <path\n       d="M 12.5,31.5 L 32.5,31.5"\n       style="fill:none; stroke:#ffffff;" />\n    <path\n       d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"\n       style="fill:none; stroke:#ffffff;" />\n    <path\n       d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"\n       style="fill:none; stroke:#ffffff;" />\n  </g>\n</svg>',Q:'\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45" width="100%" height="100%">\n  <g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">\n    <path\n      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"\n      transform="translate(-1,-1)" />\n    <path\n      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"\n      transform="translate(15.5,-5.5)" />\n    <path\n      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"\n      transform="translate(32,-1)" />\n    <path\n      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"\n      transform="translate(7,-4.5)" />\n    <path\n      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"\n      transform="translate(24,-4)" />\n    <path\n      d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z "\n      style="stroke-linecap:butt;" />\n    <path\n      d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z "\n      style="stroke-linecap:butt;" />\n    <path\n      d="M 11.5,30 C 15,29 30,29 33.5,30"\n      style="fill:none;" />\n    <path\n      d="M 12,33.5 C 18,32.5 27,32.5 33,33.5"\n      style="fill:none;" />\n  </g>\n</svg>',k:'\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45" width="100%" height="100%">\n  <g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">\n    <path\n       d="M 22.5,11.63 L 22.5,6"\n       style="fill:none; stroke:#000000; stroke-linejoin:miter;"\n       id="path6570" />\n    <path\n       d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"\n       style="fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;" />\n    <path\n       d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "\n       style="fill:#000000; stroke:#000000;" />\n    <path\n       d="M 20,8 L 25,8"\n       style="fill:none; stroke:#000000; stroke-linejoin:miter;" />\n    <path\n       d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85"\n       style="fill:none; stroke:#ffffff;" />\n    <path\n       d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37"\n       style="fill:none; stroke:#ffffff;" />\n  </g>\n</svg>',K:'\n<svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 45 45" width="100%" height="100%">\n  <g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">\n    <path\n      d="M 22.5,11.63 L 22.5,6"\n      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />\n    <path\n      d="M 20,8 L 25,8"\n      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />\n    <path\n      d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"\n      style="fill:#ffffff; stroke:#000000; stroke-linecap:butt; stroke-linejoin:miter;" />\n    <path\n      d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "\n      style="fill:#ffffff; stroke:#000000;" />\n    <path\n      d="M 11.5,30 C 17,27 27,27 32.5,30"\n      style="fill:none; stroke:#000000;" />\n    <path\n      d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5"\n      style="fill:none; stroke:#000000;" />\n    <path\n      d="M 11.5,37 C 17,34 27,34 32.5,37"\n      style="fill:none; stroke:#000000;" />\n  </g>\n</svg>',p:'\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45" width="100%" height="100%">\n  <path\n    d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "\n    style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" />\n</svg>',P:'\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45" width="100%" height="100%">\n  <path\n    d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "\n    style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" />\n</svg>'},P=[],E=0;E<64;E++)P.push(t()("div",p.board[E]));var M=new Set,_=null,B={view:function(){return t()("div.grid.grid8x8.darkBackground",Array.from({length:64},(function(e,n){return function(e){var n=(0,s.coordinates)(e),r=n[0],o=n[1];g===s.Color.Black&&(r=7-r,o=7-o,e=(0,s.ordinal)(r,o));var i=[];return M.has(e)&&i.push("highlight"),(r+o)%2?i.push("dark_square"):i.push("light_square"),"?"===p.board[e]&&i.push("fog_square"),t()("div.square",{class:i.join(" "),onclick:function(){!function(e){if(console.log(e),console.log(_),null==_){_=e;var t=p.board[e];if((0,s.getColor)(t)!==g)return void M.clear();var n=(0,s.getMoves)(e,p);M.clear();for(var r=0,o=n;r<o.length;r++){var i=o[r];M.add(i)}}else{if(console.log(_),(0,s.getMoves)(_,p).includes(e)){var c=p.board[_],l=s.Piece.Empty,u=(0,s.coordinates)(e)[0];"P"===c&&0===u&&(l="Q"),"p"===c&&7===u&&(l="q"),h={fromSquare:_,toSquare:e,promotionPiece:l},f(void 0,void 0,void 0,(function(){var e;return d(this,(function(t){switch(t.label){case 0:return e=(0,s.getAlgFromMove)(h),[4,a("live_games",{command:"move",move:e})];case 1:return[2,t.sent()]}}))}))}_=null,M.clear()}var h}(e)}},t().trust(x[p.board[e]]))}(n)})))}},A=new Map;A.set(s.GameStatus.InProgress,"Playing"),A.set(s.GameStatus.WhiteWins,"White wins"),A.set(s.GameStatus.BlackWins,"Black wins"),A.set(s.GameStatus.WhiteResigns,"White resigns"),A.set(s.GameStatus.BlackResigns,"Black resigns");var L=function(e,n,r){if(e===s.GameStatus.InProgress){if(r===s.Color.White)return t()("div","White to move");if(r===s.Color.Black)return t()("div","Black to move")}return n?t()("div","Searching for game..."):A.get(e)?t()("div",A.get(e)):t()("")},T=function(e){return e!==s.GameStatus.InProgress?t()("button",{onclick:k},"Play computer"):t()("button",{onclick:S},"Resign game")},F=function(e,n){return n===s.GameStatus.InProgress?t()(""):e?t()("button",{onclick:b},"Stop request"):t()("button",{onclick:w},"Play human")},q={view:function(){return t()("div.grid1x3.justifyCenter.spaceEvenly.lightBackground.pad.highest",[L(y,m,v),T(y),F(m,y)])}},O=function(e){var n=Math.floor(e/1e3),r=Math.floor(n/60),o=""+(n-=60*r);return n<10&&(o="0"+o),t()("div.lightBackground.pad",r+":"+o)},j={view:function(){return t()("div.column",[t()("div.row.alignCenter.spaceEvenly.lightBackground.shadow.high",[g===s.Color.Black?O(c):O(l)]),t()("div.row.alignCenter.justifyCenter.darkBackground.middle",[t()(B)]),t()("div.row.alignCenter.spaceEvenly.lightBackground.shadow.high",[g===s.Color.White?O(c):O(l)]),t()(q)])}},N=n(3379),R=n.n(N),z=n(174);R()(z.Z,{insert:"head",singleton:!1}),z.Z.locals;var D={view:function(){return t()("div.app",[t()(j)])}};t().mount(document.body,D);var I=r();I.on("new_socket",(function(e){var n,r,o,i,s;"socket_id"in e&&(n=e.socket_id,r=void 0,o=void 0,s=function(){var e;return function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(r){switch(r.label){case 0:return[4,t().request({method:"POST",url:"/new_socket",body:{socket_id:n},withCredentials:!0})];case 1:return e=r.sent(),console.log(e),[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,a)}c((s=s.apply(r,o||[])).next())}))),C().catch(console.log)})),I.on("update",(function(){C().catch(console.log)}))})()})();